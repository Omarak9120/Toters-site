---
export interface Props {
  items?: Array<{ title: string; desc: string }>;
  locale?: string;
}

const { items, locale = 'en' } = Astro.props;

const isRTL = locale === 'ar';

// Value propositions content translations
const valuePropsContent = {
  en: {
    title: "Why Choose Toters?",
    subtitle: "We're committed to providing the best delivery experience for everyone",
    props: [
      {
        icon: "speed",
        title: "Lightning Fast",
        description: "Get your orders delivered in 30 minutes or less with our optimized delivery network.",
        features: ["30-min delivery", "Real-time tracking", "Smart routing"]
      },
      {
        icon: "reliability",
        title: "Always Reliable",
        description: "Count on us for consistent, dependable service every time you order.",
        features: ["99.9% uptime", "Quality guarantee", "24/7 support"]
      },
      {
        icon: "variety",
        title: "Wide Selection",
        description: "Choose from thousands of restaurants and stores in your area.",
        features: ["10K+ partners", "Fresh options", "Local favorites"]
      },
      {
        icon: "security",
        title: "Secure & Safe",
        description: "Your data and payments are protected with enterprise-grade security.",
        features: ["SSL encryption", "PCI compliance", "Privacy protection"]
      },
      {
        icon: "support",
        title: "24/7 Support",
        description: "Our dedicated support team is always here to help you.",
        features: ["Live chat", "Phone support", "Help center"]
      },
      {
        icon: "sustainability",
        title: "Eco-Friendly",
        description: "We're committed to reducing our environmental impact.",
        features: ["Carbon neutral", "Eco packaging", "Green delivery"]
      }
    ]
  },
  ar: {
    title: "لماذا تختار توتيرز؟",
    subtitle: "نحن ملتزمون بتقديم أفضل تجربة توصيل للجميع",
    props: [
      {
        icon: "speed",
        title: "سريع كالبرق",
        description: "احصل على طلباتك في 30 دقيقة أو أقل مع شبكة التوصيل المحسنة لدينا.",
        features: ["توصيل في 30 دقيقة", "تتبع في الوقت الفعلي", "توجيه ذكي"]
      },
      {
        icon: "reliability",
        title: "موثوق دائماً",
        description: "اعتمد علينا للحصول على خدمة متسقة وموثوقة في كل مرة تطلب فيها.",
        features: ["99.9% وقت تشغيل", "ضمان الجودة", "دعم 24/7"]
      },
      {
        icon: "variety",
        title: "اختيار واسع",
        description: "اختر من آلاف المطاعم والمتاجر في منطقتك.",
        features: ["10K+ شريك", "خيارات طازجة", "المفضلة المحلية"]
      },
      {
        icon: "security",
        title: "آمن ومضمون",
        description: "بياناتك ومدفوعاتك محمية بأمان على مستوى المؤسسات.",
        features: ["تشفير SSL", "امتثال PCI", "حماية الخصوصية"]
      },
      {
        icon: "support",
        title: "دعم 24/7",
        description: "فريق الدعم المخصص لدينا موجود دائماً لمساعدتك.",
        features: ["دردشة مباشرة", "دعم هاتفي", "مركز المساعدة"]
      },
      {
        icon: "sustainability",
        title: "صديق للبيئة",
        description: "نحن ملتزمون بتقليل تأثيرنا البيئي.",
        features: ["محايد الكربون", "تغليف صديق للبيئة", "توصيل أخضر"]
      }
    ]
  }
};

const content = valuePropsContent[locale as keyof typeof valuePropsContent] || valuePropsContent.en;

// Icon components as HTML strings (Astro frontmatter does not support JSX)
const getIcon = (iconType: string): string => {
  const icons: Record<string, string> = {
    speed:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />\n      </svg>',
    reliability:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />\n      </svg>',
    variety:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />\n      </svg>',
    security:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />\n      </svg>',
    support:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M12 2.25a9.75 9.75 0 100 19.5 9.75 9.75 0 000-19.5z" />\n      </svg>',
    sustainability:
      '<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />\n      </svg>'
  };
  return icons[iconType] ?? icons.speed;
};
---

<section class="py-20 bg-white cv-auto" aria-labelledby="value-props-title">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center mb-16" data-anim="reveal">
      <h2 id="value-props-title" class="text-3xl sm:text-4xl font-bold text-gray-900 mb-4">
        {content.title}
      </h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        {content.subtitle}
      </p>
    </div>

    <!-- Value Propositions Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" data-stagger>
      {(items || content.props).map((prop, index) => (
        <div 
          class="group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:border-primary-200"
          data-anim="reveal"
        >
          <!-- Icon -->
          <div class="inline-flex items-center justify-center w-16 h-16 bg-primary-100 text-primary-600 rounded-xl mb-6 group-hover:bg-primary-600 group-hover:text-white transition-colors duration-300">
            <Fragment set:html={getIcon(prop.icon || 'speed')} />
          </div>

          <!-- Content -->
          <h3 class="text-xl font-semibold text-gray-900 mb-3">
            {prop.title}
          </h3>
          <p class="text-gray-600 mb-6 leading-relaxed">
            {prop.desc || prop.description}
          </p>

          <!-- Features List (only show if features exist) -->
          {prop.features && (
            <ul class="space-y-2">
              {prop.features.map((feature) => (
                <li class="flex items-center text-sm text-gray-700">
                  <svg class="w-4 h-4 text-primary-600 mr-2 rtl:mr-0 rtl:ml-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                  </svg>
                  {feature}
                </li>
              ))}
            </ul>
          )}

          <!-- Hover Effect -->
          <div class="absolute inset-0 rounded-2xl bg-gradient-to-br from-primary-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
        </div>
      ))}
    </div>

    <!-- Bottom CTA -->
    <div class="text-center mt-16">
      <div class="bg-gradient-to-r from-primary-50 to-secondary-50 rounded-2xl p-8 md:p-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-4">
          {locale === 'ar' ? 'جاهز للبدء؟' : 'Ready to get started?'}
        </h3>
        <p class="text-gray-600 mb-8 max-w-2xl mx-auto">
          {locale === 'ar' 
            ? 'انضم إلى ملايين العملاء الذين يثقون في توتيرز لتوصيل طلباتهم.'
            : 'Join millions of customers who trust Toters for their delivery needs.'
          }
        </p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href={locale === 'ar' ? '/ar/download' : '/download'}
            class="inline-flex items-center justify-center px-8 py-4 bg-primary-600 hover:bg-primary-700 text-white font-semibold rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
          >
            <svg class="w-5 h-5 mr-2 rtl:mr-0 rtl:ml-2" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            {locale === 'ar' ? 'تحميل التطبيق' : 'Download App'}
          </a>
          <a
            href={locale === 'ar' ? '/ar/contact' : '/contact'}
            class="inline-flex items-center justify-center px-8 py-4 bg-white hover:bg-gray-50 text-gray-900 font-semibold rounded-lg border border-gray-300 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"
          >
            {locale === 'ar' ? 'اتصل بنا' : 'Contact Us'}
            <svg class="w-5 h-5 ml-2 rtl:ml-0 rtl:mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</section>
